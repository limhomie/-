<!-- 发布动态页面（publish.html） -->
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>发布动态 - 深大校园圈</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/publish.css" />
    <link rel="stylesheet" href="css/modal.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- 导航栏 -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-left">
          <a href="index.html" class="logo">
            <i class="fas fa-graduation-cap"></i>
            <span>深大校园圈</span>
          </a>
          <div class="nav-menu">
            <a href="index.html" class="nav-item"
              ><i class="fas fa-home"></i> 首页</a
            >
            <a href="#hot" class="nav-item"><i class="fas fa-fire"></i> 热门</a>
            <a href="#" class="nav-item active" id="publish-btn"
              ><i class="fas fa-plus"></i> 发布</a
            >
            <a
              href="#following"
              class="nav-item"
              id="following-tab"
              style="display: none"
            >
              <i class="fas fa-user-friends"></i> 关注
            </a>
          </div>
        </div>
        <div class="nav-right">
          <div class="search-box">
            <input type="text" placeholder="搜索动态或用户..." />
            <button><i class="fas fa-search"></i></button>
          </div>
          <div class="auth-buttons" id="auth-buttons">
            <a href="login.html" class="btn btn-outline">登录</a>
            <a href="register.html" class="btn btn-primary">注册</a>
          </div>
          <div class="user-menu" id="user-menu" style="display: none">
            <img
              src="images/default-avatar.png"
              alt="头像"
              class="user-avatar"
            />
            <span class="user-name">用户名</span>
            <div class="dropdown-menu">
              <a href="profile.html"><i class="fas fa-user"></i> 个人主页</a>
              <a href="profile.html?tab=posts"
                ><i class="fas fa-edit"></i> 我的动态</a
              >
              <a href="index.html"><i class="fas fa-home"></i> 返回首页</a>
              <hr />
              <a href="#" id="logout-btn"
                ><i class="fas fa-sign-out-alt"></i> 退出登录</a
              >
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- 发布动态内容 -->
    <div class="profile-container">
      <div class="profile-card">
        <div class="profile-header">
          <h1 id="page-title">发布动态</h1>
          <p>分享你的校园生活</p>
        </div>

        <form id="post-form" class="post-editor">
          <!-- 动态内容 -->
          <div class="form-group">
            <label for="post-content">动态内容 *</label>
            <textarea
              id="post-content"
              placeholder="写下你想分享的内容..."
              maxlength="2000"
              required
            ></textarea>
            <div class="char-count"><span id="char-count">0</span>/2000</div>
          </div>

          <!-- 图片上传 -->
          <div class="form-group">
            <label>添加图片</label>
            <div class="image-upload-area">
              <input
                type="file"
                id="post-images"
                accept="image/*"
                multiple
                style="display: none"
              />
              <div
                class="upload-placeholder"
                onclick="document.getElementById('post-images').click()"
              >
                <i class="fas fa-cloud-upload-alt"></i>
                <p>点击上传图片</p>
                <small>支持多张图片，最多9张</small>
              </div>
              <div id="image-preview" class="image-preview"></div>
            </div>
            <div class="form-group" style="margin-top: 10px">
              <label for="image-link">或输入图片链接</label>
              <input
                type="url"
                id="image-link"
                placeholder="示例：https://example.com/image.jpg"
              />
              <button
                type="button"
                class="btn btn-outline btn-sm"
                onclick="addImageFromLink()"
              >
                添加链接
              </button>
            </div>
          </div>

          <!-- 标签 -->
          <div class="form-group">
            <label for="post-tags-input">添加标签</label>
            <input
              type="text"
              id="post-tags-input"
              placeholder="输入标签，按回车添加"
            />
            <div id="selected-tags" class="selected-tags"></div>
            <div class="tag-suggestions">
              <span class="tag-suggestion">#学习日常</span>
              <span class="tag-suggestion">#校园生活</span>
              <span class="tag-suggestion">#求助</span>
              <span class="tag-suggestion">#活动</span>
              <span class="tag-suggestion">#二手交易</span>
            </div>
          </div>

          <!-- 可见范围 -->
          <div class="form-group">
            <label>可见范围</label>
            <div class="visibility-options">
              <label class="radio-label">
                <input
                  type="checkbox"
                  name="visibility"
                  value="friends"
                  id="visibility-friends"
                />
                <i class="fas fa-user-friends"></i> 仅好友可见
              </label>
            </div>
          </div>

          <!-- 提交按钮 -->
          <div class="form-actions">
            <button
              type="button"
              class="btn btn-outline"
              onclick="window.history.back()"
            >
              取消
            </button>
            <button type="submit" class="btn btn-primary" id="submit-btn">
              <i class="fas fa-paper-plane"></i> 发布动态
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- 脚本 -->
    <script src="js/app.js"></script>
    <script src="js/posts.js"></script>
    <script src="js/auth.js"></script>
  </body>
</html>
